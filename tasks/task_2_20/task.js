function $(e,n){return n=n||document,n.querySelector(e)}function removeEmpty(e){var n=[];return[].forEach.call(e,function(e){""!==e&&n.push(e)}),n}function clearClass(e){e.className=""}function addClass(e,n){e.className=n}function renderQueue(e){var n=$("#queue-wrap"),t=document.createElement("ul");n.innerHTML="",n.appendChild(t),t.innerHTML=queueData.map(function(n){var t=n;return e&&RegExp(e).test(n)&&(t=String(n).replace(e,'<span class="high-light">'+e+"</span>")),"<li>"+t+"</li>"}).join("")}function deal(e,n){var t=[].slice.call(arguments,2);return function(a){try{var r=t.map(function(e){return"function"==typeof e?e(a):e});if(Array.isArray(r[0]))r[0].forEach(function(n){e.apply(queueData,[n].concat(r.slice(1)))});else var u=e.apply(queueData,r);renderQueue(),n&&n(u+" 被移出了队列")}catch(i){alert(i.message)}}}function getInput(){var e=$("#input").value.trim();if(!validate(e))throw new Error("请输入中英文或数字，用逗号、回车、空格作为区分");return e=removeEmpty(e.split(/[\s\n,，]/))}function getInputReverse(){return getInput().reverse()}function validate(e){return/^[\dA-Za-z\u4e00-\u9fa5\s\n,，]+$/.test(e)}function getIndex(e){return"span"===e.target.tagName.toLowerCase()?Array.from(document.querySelectorAll("span")).indexOf(e.target):void 0}function searchHandler(){var e=$("#search-input").value,n=RegExp(e),t=Array.from(document.querySelectorAll("li"));t.forEach(function(e){clearClass(e)});queueData.forEach(function(e,a){n.test(e)&&addClass(t[a],"high-light")})}function initEvent(){$("#unshift").addEventListener("click",deal([].unshift,null,getInputReverse)),$("#push").addEventListener("click",deal([].push,null,getInput)),$("#shift").addEventListener("click",deal([].shift,window.alert)),$("#pop").addEventListener("click",deal([].pop,window.alert)),$("#queue-wrap").addEventListener("click",deal([].splice,window.alert,getIndex,1)),$("#search").addEventListener("click",function(){renderQueue($("#search-input").value)})}function init(){renderQueue(),initEvent()}var queueData=[];window.onload=init;