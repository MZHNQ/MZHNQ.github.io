!function(){function n(n,t){return t=t||document,t.querySelector(n)}function t(n,t){for(var e=[];n.length&&t.length;)e.push(n[0]>t[0]?t.shift():n.shift());return e=e.concat(n).concat(t)}function e(n,r){if(r=r||0,1===n.length)return n;var i=Math.floor(n.length/2),a=n.slice(0,i),c=n.slice(i),u=t(e(a,r),e(c,i+r));return[].splice.apply(h,[r,u.length].concat(u)),v.push(h.slice()),u}function r(){var t=n("#queue-wrap");t.innerHTML="";var e=document.createElement("div");t.appendChild(e),e.innerHTML=h.map(function(n){return'<span style="height:'+2*n+'px"><em>'+n+"</em></span>"}).join("")}function i(){var n,t=60;for(h=[],n=0;t>n;n++)h.push(Math.ceil(100*Math.random()));r()}function a(){h=v.shift(),r()}function c(){return p?alert("排序演示正在进行"):(e(h),void(p=setInterval(function(){return v.length?void a():(clearInterval(p),void(p=null))},200)))}function u(n,t){var e=[].slice.call(arguments,2);return function(i){try{var a=e.map(function(n){return"function"==typeof n?n(i):n}),c=n.apply(h,a);r(),t&&t(c+" 被移出了队列")}catch(u){alert(u.message)}}}function o(){var t=n("input").value.trim();if(!l(t)||parseInt(t)>100)throw new Error("请输入不超过 100 的正整数");return parseInt(n("input").value.trim())}function l(n){return/^\d+$/.test(n)}function s(n){return"span"===n.target.tagName.toLowerCase()?Array.from(document.querySelectorAll("span")).indexOf(n.target):void 0}function f(){n("#unshift").addEventListener("click",u([].unshift,null,o)),n("#push").addEventListener("click",u([].push,null,o)),n("#shift").addEventListener("click",u([].shift,window.alert)),n("#pop").addEventListener("click",u([].pop,window.alert)),n("#queue-wrap").addEventListener("click",u([].splice,window.alert,s,1)),n("#sort").addEventListener("click",c),n("#generate").addEventListener("click",i)}function d(){f()}var p,h=[],v=[];window.onload=d}();