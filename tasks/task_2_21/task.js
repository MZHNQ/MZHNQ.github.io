function $(t,e){return e=e||document,e.querySelector(t)}function removeEmpty(t){var e=[];return[].forEach.call(t,function(t){""!==t&&e.push(t)}),e}function unique(t){var e=[];return t.forEach(function(t){-1===e.indexOf(t)&&e.push(t)}),e}function limit(t,e){return t.length>e?t.slice(t.length-e):t}function hover(t,e,n){t.addEventListener("mouseover",e),t.addEventListener("mouseout",n)}function Queue(t){this.data=[],this.container=$(t.selector),this.type=t.type,this.init()}Queue.prototype.render=function(){this.output.innerHTML=this.data.map(function(t){return"<span>"+t+"</span>"}).join("")},Queue.prototype.initElements=function(){this.input=document.createElement(this.type),this.container.appendChild(this.input),"textarea"===this.type&&(this.btn=document.createElement("button"),this.btn.innerHTML="确认兴趣爱好",this.container.appendChild(this.btn)),this.output=document.createElement("div"),this.container.appendChild(this.output)},Queue.prototype._getInput=function(){var t=this.input.value.trim();return removeEmpty(t.split(/[\s\n,，;；]/))},Queue.prototype.addHandler=function(){var t=this._getInput();Array.isArray(t)||(t=[t]),this.data=this.data.concat(t),this.data=limit(unique(this.data),10),this.render()},Queue.prototype.removeHandler=function(t){if("span"===t.target.tagName.toLowerCase()){var e=Array.from(this.container.querySelectorAll("span")).indexOf(t.target);this.data.splice(e,1),this.render()}},Queue.prototype._hover=function(){hover(this.container,function(t){"span"===t.target.tagName.toLowerCase()&&(t.target.innerHTML="删除"+t.target.innerHTML)},function(t){"span"===t.target.tagName.toLowerCase()&&(t.target.innerHTML=t.target.innerHTML.slice(2))})},Queue.prototype.initEvent=function(){"textarea"===this.type?this.btn.addEventListener("click",this.addHandler.bind(this)):(this.input.addEventListener("keyup",function(t){(32===t.which||13===t.which||186===t.which)&&(this.addHandler(),t.target.value="")}.bind(this)),this.output.addEventListener("click",this.removeHandler.bind(this)),this._hover())},Queue.prototype.init=function(){this.initElements(),this.initEvent()};var hobby=new Queue({selector:"#hobby",type:"textarea"}),tag=new Queue({selector:"#tag",type:"input"});